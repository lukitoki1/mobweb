<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Notes App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/Login-Form-Clean.css">
    <link rel="stylesheet" href="../static/css/Navigation-Clean.css">
    <link rel="stylesheet" href="../static/css/styles.css">
</head>

<body>
<div class="container">
    <nav class="navbar navbar-light navbar-expand-md navigation-clean">
        <div class="container-fluid"><a class="navbar-brand" href="/">Notes App</a>
            <button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span
                    class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse"
                 id="navcol-1">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item" role="presentation"><a class="nav-link active"
                                                                style="background-color: #f8f8f8;">{{ username }}</a>
                    </li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/reset">Change Password</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/logout">Log Out</a></li>
                </ul>
            </div>
        </div>
    </nav>
</div>
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="container">
            {% for message in messages %}
                <div class="alert alert-success" role="alert" style="padding-right: 12px;padding-left: 12px;">
                    <span>{{ message }}</span></div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}
<div class="container">
    <div class="card" style="margin-bottom: 16px;margin-top: 16px;">
        <div class="card-body bg-light">
            <form method="post" action="/">
                {{ form.csrf_token }}
                <div class="form-group d-flex">
                    {{ form.note(
                    class="bg-white form-control form-control-lg d-flex float-none flex-grow-1 flex-shrink-1 flex-fill",
                    placeholder="Note",
                    style="min-height: 50px;height: 50px;"
                    ) }}
                </div>
                <div class="form-group">
                    {% for error in form.note.errors %}
                        <div class="alert alert-danger" role="alert" style="padding-right: 12px;padding-left: 12px;">
                            <span>{{ error }}</span></div>
                    {% endfor %}
                </div>
                <div class="form-group">
                    <div class="col d-flex align-items-center" style="padding-right: 0px;">
                        <div class="custom-control custom-control-inline custom-switch">
                            <input
                                    class="custom-control-input" type="checkbox" id="restricted" name="restricted"
                                    onchange="document.getElementById('users').disabled = !this.checked;"><label
                                class="custom-control-label" for="restricted">Restricted</label>
                        </div>
                        {{ form.users(
                        disabled="disabled",
                        class="form-control form-control-lg d-flex float-none flex-grow-1 flex-shrink-1 flex-fill",
                        placeholder="Users (divided by comma)",
                        style="height: 50px;min-height: 50px;"
                        ) }}
                    </div>
                </div>
                <div class="form-group">
                    {% for error in form.users.errors %}
                        <div class="alert alert-danger" role="alert" style="padding-right: 12px;padding-left: 12px;">
                            <span>{{ error }}</span></div>
                    {% endfor %}
                </div>
                <div class="form-group">
                    <button class="btn btn-primary d-flex float-right" type="submit">Create Note</button>
                </div>
            </form>
        </div>
    </div>
    {% for note in notes %}
        <div class="card" style="margin-top: 16px;margin-bottom: 16px;">
            <div class="card-body">
                <p class="text-break card-text" style="font-size: 24px;margin-bottom: 0px;">{{ note['note'] }}</p>
                <p class="d-flex float-left d-lg-flex justify-content-lg-start card-text"
                   style="font-size: 18px;margin-right: 16px;">{{ note['owner'] }}</p>
                <p class="lead text-break d-flex float-left d-lg-flex justify-content-lg-start card-text"
                   style="font-size: 18px;">{{ note['users']|join(', ') }}</p>
                <p class="lead text-break d-flex float-right d-lg-flex justify-content-lg-start card-text"
                   style="font-size: 18px;">{{ note['timestamp'] }}</p>
            </div>
        </div>
    {% endfor %}
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
</body>

</html>